{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$ref": "#/definitions/Config",
  "definitions": {
    "Config": {
      "$ref": "#/definitions/Partial%3CBranchConfig%3E"
    },
    "Partial<BranchConfig>": {
      "type": "object",
      "properties": {
        "branchTypes": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/BranchTypeOption"
          },
          "description": "List of branch types"
        },
        "maxDescriptionLength": {
          "type": "number",
          "description": "Maximum length of branch description"
        },
        "ignoredBranches": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/BranchIgnorePattern"
          },
          "description": "Branch names or patterns that should be ignored by linting"
        },
        "descriptionStyle": {
          "$ref": "#/definitions/DescriptionStyle",
          "description": "Enforced branch description casing style"
        },
        "template": {
          "type": "string",
          "description": "Template for branch name format. Placeholders: {{type}}, {{ticket}}, {{desc}}"
        },
        "plugins": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/RuleExtensionSource"
          },
          "description": "Additional rule definition sets to load"
        },
        "presets": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/RulePresetSource"
          },
          "description": "Rule presets to merge into the configuration"
        },
        "rules": {
          "$ref": "#/definitions/Rules",
          "description": "Rules configuration"
        },
        "extraQuestions": {
          "$ref": "#/definitions/InteractiveQuestions",
          "description": "Control which optional questions are shown during interactive branch creation"
        },
        "questions": {
          "$ref": "#/definitions/QuestionConfig",
          "description": "Customize the text of prompts shown during interactive branch creation"
        },
        "showCliTips": {
          "type": "boolean",
          "description": "Show CLI tips about using flags (default: true)"
        },
        "ticketIdPrompt": {
          "$ref": "#/definitions/TicketIdPromptMode",
          "deprecated": "Use rules.ticketId instead. Ticket ID prompt mode."
        },
        "ticketIdPrefix": {
          "type": "string",
          "deprecated": "Use rules.ticketId[1].prefix instead. Ticket ID prefix"
        }
      },
      "additionalProperties": false
    },
    "BranchTypeOption": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "label": {
          "type": "string"
        }
      },
      "required": [
        "name",
        "label"
      ],
      "additionalProperties": false
    },
    "BranchIgnorePattern": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "string",
          "format": "regex"
        }
      ]
    },
    "DescriptionStyle": {
      "type": "string",
      "enum": [
        "kebab-case",
        "snake_case",
        "PascalCase",
        "camelCase"
      ]
    },
    "RuleExtensionSource": {
      "type": "string"
    },
    "RulePresetSource": {
      "type": "string"
    },
    "Rules": {
      "type": "object",
      "properties": {
        "ticketId": {
          "$ref": "#/definitions/TicketIdRuleConfig"
        }
      },
      "additionalProperties": {
        "$ref": "#/definitions/GenericRuleConfig"
      }
    },
    "RuleSeverity": {
      "type": "string",
      "enum": [
        "off",
        "optional",
        "required"
      ],
      "description": "Rule severity: off, optional, or required."
    },
    "TicketIdRuleOptions": {
      "type": "object",
      "properties": {
        "prefix": {
          "type": "string",
          "description": "Ticket ID prefix, e.g. \"NPXR-\"."
        }
      },
      "additionalProperties": false
    },
    "InteractiveQuestions": {
      "type": "object",
      "properties": {
        "baseBranch": {
          "type": "boolean",
          "description": "Whether to show the base branch question"
        },
        "checkout": {
          "type": "boolean",
          "description": "Whether to show the checkout question"
        },
        "pushToRemote": {
          "type": "boolean",
          "description": "Whether to show the push to remote question"
        }
      },
      "additionalProperties": false
    },
    "QuestionConfig": {
      "type": "object",
      "properties": {
        "branchType": {
          "type": "string",
          "description": "Custom text for the branch type selection prompt"
        },
        "ticketId": {
          "type": "string",
          "description": "Custom text for the ticket ID prompt"
        },
        "ticketIdRequired": {
          "type": "string",
          "description": "Custom text for the required ticket ID prompt"
        },
        "description": {
          "type": "string",
          "description": "Custom text for the description prompt"
        },
        "descriptionWithTicket": {
          "type": "string",
          "description": "Custom text for the description prompt when ticket ID is provided"
        },
        "baseBranch": {
          "type": "string",
          "description": "Custom text for the base branch prompt"
        },
        "checkout": {
          "type": "string",
          "description": "Custom text for the checkout confirmation prompt"
        },
        "proceed": {
          "type": "string",
          "description": "Custom text for the proceed confirmation prompt"
        },
        "pushToRemote": {
          "type": "string",
          "description": "Custom text for the push to remote confirmation prompt"
        }
      },
      "additionalProperties": false
    },
    "TicketIdPromptMode": {
      "type": "string",
      "enum": [
        "required",
        "optional",
        "skip"
      ]
    },
    "TicketIdRuleConfig": {
      "description": "Rule configuration for the built-in ticketId rule.",
      "anyOf": [
        {
          "type": "boolean"
        },
        {
          "$ref": "#/definitions/RuleSeverity"
        },
        {
          "type": "array",
          "minItems": 2,
          "maxItems": 2,
          "items": [
            {
              "$ref": "#/definitions/RuleSeverity"
            },
            {
              "$ref": "#/definitions/TicketIdRuleOptions"
            }
          ]
        },
        {
          "type": "object",
          "properties": {
            "severity": {
              "$ref": "#/definitions/RuleSeverity"
            },
            "options": {
              "$ref": "#/definitions/TicketIdRuleOptions"
            }
          },
          "required": [
            "severity"
          ],
          "additionalProperties": false
        }
      ]
    },
    "GenericRuleConfig": {
      "description": "Rule configuration for any other rule.",
      "anyOf": [
        {
          "type": "boolean"
        },
        {
          "$ref": "#/definitions/RuleSeverity"
        },
        {
          "type": "array",
          "minItems": 2,
          "maxItems": 2,
          "items": [
            {
              "$ref": "#/definitions/RuleSeverity"
            },
            {}
          ]
        },
        {
          "type": "object",
          "properties": {
            "severity": {
              "$ref": "#/definitions/RuleSeverity"
            },
            "options": {}
          },
          "required": [
            "severity"
          ],
          "additionalProperties": false
        }
      ]
    }
  },
  "$id": "https://raw.githubusercontent.com/branchwright/branchwright/main/schemas/branchwright-config.schema.json",
  "title": "Branchwright Configuration Schema",
  "description": "Schema definition for .branchwrightrc(.json/.yaml) configuration files."
}
